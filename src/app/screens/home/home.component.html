<div class="container mx-auto bg-main-color px-5 py-5" *ngIf="categories && products">
    <h4 class="mb-2 font-lg">Choose your category</h4>
    <div class="flex gap-5 mb-5">
        <svg 
            [ngClass]="{'text-gray-400 cursor-auto': this.currentIndexCategory === 0}"
            (click)="previousCarousel()" 
            class="cursor-pointer" 
            xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 20 20"><path fill="currentColor" d="m5.83 9l5.58-5.58L10 2l-8 8l8 8l1.41-1.41L5.83 11H18V9z"/></svg>
        <svg 
            [ngClass]="{'text-gray-400 cursor-auto': this.currentIndexCategory >= this.categories.length - 4}"
            (click)="nextCarousel()" 
            class="cursor-pointer" 
            xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-width="2" d="M2 12h20m-9-9l9 9l-9 9"/></svg>
    </div>
    <div class="flex flex-row overflow-hidden gap-x-1 mb-5">
        <div 
            *ngFor="let category of categories; index as i"       
            [ngStyle]="{transform: getTranslation()}"
          class="grow-0 w-1/4 shrink-0 transition ease-in-out duration-500"
            >
            <img class="h-[300px] w-full" src={{category.imagePath}} />
            <h6 class="capitalize py-1">{{category.name}}</h6>
        </div>
    </div>
    <div>
        <div class="flex items-center justify-between py-3">
            <p>1-40 of 155 items</p>
            <div class="flex items-center gap-x-1">
                Sort by:
                <select class="border border-black rounded" (change)="onSortChange($event)">
                    <option value="0">Newest</option>
                    <option value="1">Price: Low to High</option>
                    <option value="2">Price: High to Low</option>
                </select>
            </div>
        </div>
        <hr/>
        <div class="flex mt-3 gap-x-10">
            <div>
                <div class="relative mb-2">
                    <input 
                        (keydown)="onChangeKeyword($event)"
                        id="keyword" 
                        name="keyword" 
                        type="text" 
                        placeholder="Enter a keyword" 
                        class="border border-black rounded-md px-2 shadow py-1" />
                     <span class="absolute right-0 top-1/2 transform -translate-y-1/2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" viewBox="0 0 24 24"><path fill="currentColor" d="m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5t1.888-4.612T9.5 3t4.613 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3zM9.5 14q1.875 0 3.188-1.312T14 9.5t-1.312-3.187T9.5 5T6.313 6.313T5 9.5t1.313 3.188T9.5 14"/></svg>
                    </span>
                </div>            
                <app-accordion 
                    filter="category"
                    type="checkbox"
                    (checked)="changeFiltre({type: $event.filter , key: $event.key, value: $event.value})"
                    [items]="{title: 'Categories', content: categories | categoryName:'name', values: categories | categoryName:'id' }">
                </app-accordion>
                <app-accordion 
                    filter="price"
                    type="radio"
                    (checked)="changeFiltre({type: $event.filter , key: $event.key, value: $event.value})"
                    [items]="{title: 'Prices', content: ['0$ - $25', '25$ - $50', '50$ - $75', '75$ - $100', '+$100'], values: ['0-25', '25-50', '50-75', '75-100','100-'] }"></app-accordion>
            </div>
            <div class="grid-cols-3 grid gap-x-10 gap-y-5 mb-6 w-full">
                <div 
                    *ngFor="let product of products"
                    [routerLink]="['/product', product.id]"
                    class="bg-white cursor-pointer shadow-lg rounded-md">
                    <div class="h-[300px] flex items-center  justify-center ">
                        <img class="h-[250px] w-[250px] w-full" src={{product.imagePath}} />
                    </div>
                    <div class="flex justify-between px-2 py-2 items-center border-gray-200 ">
                        <h4 class="text-gray-700 font-semibold text-md">{{product.title}}</h4>
                        <span class="text-gray-700 font-bold text-lg text-right">{{product.price}} $</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
